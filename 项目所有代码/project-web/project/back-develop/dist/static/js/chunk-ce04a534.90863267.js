(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ce04a534"],{"26c6":function(t,e,n){},a434:function(t,e,n){"use strict";var o=n("23e7"),i=n("23cb"),l=n("a691"),a=n("50c4"),r=n("7b0b"),c=n("65f0"),s=n("8418"),u=n("1dde"),d=n("ae40"),p=u("splice"),h=d("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,g=Math.min,b=9007199254740991,m="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!p||!h},{splice:function(t,e){var n,o,u,d,p,h,w=r(this),S=a(w.length),v=i(t,S),k=arguments.length;if(0===k?n=o=0:1===k?(n=0,o=S-v):(n=k-2,o=g(f(l(e),0),S-v)),S+n-o>b)throw TypeError(m);for(u=c(w,o),d=0;d<o;d++)p=v+d,p in w&&s(u,d,w[p]);if(u.length=o,n<o){for(d=v;d<S-o;d++)p=d+o,h=d+n,p in w?w[h]=w[p]:delete w[h];for(d=S;d>S-o+n;d--)delete w[d-1]}else if(n>o)for(d=S-o;d>v;d--)p=d+o-1,h=d+n-1,p in w?w[h]=w[p]:delete w[h];for(d=0;d<n;d++)w[d+v]=arguments[d+2];return w.length=S-o+n,u}})},cb3e:function(t,e,n){"use strict";var o=n("26c6"),i=n.n(o);i.a},e6e2:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[n("div",[n("i",{staticClass:"el-icon-search"}),n("span",[t._v("筛选搜索")]),n("el-button",{staticStyle:{float:"right","margin-top":"35px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.handleSearchList()}}},[t._v("查询结果")]),n("el-button",{staticStyle:{float:"right","margin-top":"35px","margin-right":"15px"},attrs:{size:"small"},on:{click:function(e){return t.handleResetSearch()}}},[t._v("重置")])],1),n("div",{staticStyle:{"margin-top":"15px"}},[n("el-form",{attrs:{inline:!0,size:"small","label-width":"140px"}},[n("el-form-item",{attrs:{label:"输入搜索："}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"商品名称"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)],1)],1)]),n("div",[n("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[n("i",{staticClass:"el-icon-tickets"}),n("span",[t._v("数据列表")]),n("el-button",{staticStyle:{float:"right",width:"80px"},attrs:{type:"primary",size:"small"},on:{click:t.addShopCerent}},[t._v("添加")])],1)],1),n("div",{staticClass:"table-container"},[n("el-table",{ref:"productTable",staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[n("el-table-column",{attrs:{type:"selection",width:"60",align:"center"}}),n("el-table-column",{attrs:{label:"编号",width:"90",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.id))]}}])}),n("el-table-column",{attrs:{label:"商品图片",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("img",{staticStyle:{height:"80px"},attrs:{src:t.row.img}})]}}])}),n("el-table-column",{attrs:{label:"商品名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("p",[t._v(t._s(e.row.title))])]}}])}),n("el-table-column",{attrs:{label:"价格",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("p",[t._v("￥"+t._s(e.row.price))])]}}])}),n("el-table-column",{attrs:{label:"SKU库存",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(n){return t.handleShowSkuEditDialog(e.$index,e.row)}}})]}}])}),n("el-table-column",{attrs:{label:"销量",width:"120",align:"center"}},[[t._v("1200")]],2),n("el-table-column",{attrs:{label:"操作",width:"260",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return t.handleShowSkuEditDialog1(e.$index,e.row)}}},[t._v("编辑")]),n("el-button",{attrs:{size:"mini"},on:{click:function(n){return t.handleAddCoupon(e.$index,e.row)}}},[t._v("添加优惠券")]),n("el-button",{attrs:{size:"mini",type:"danger"},nativeOn:{click:function(n){return n.preventDefault(),t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1),n("el-dialog",{attrs:{title:"产品信息",visible:t.dialogVisible,width:"40%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:t.stockList,border:""}},[t._l(t.productAttr,(function(e,o){return n("el-table-column",{key:e.id,attrs:{label:e.name,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.getProductSkuSp(e.row,o)))]}}],null,!0)})})),n("el-table-column",{attrs:{label:"销售价格",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{disabled:""},model:{value:e.row.price,callback:function(n){t.$set(e.row,"price",n)},expression:"scope.row.price"}})]}}])}),n("el-table-column",{attrs:{label:"商品库存",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{disabled:""},model:{value:e.row.stock,callback:function(n){t.$set(e.row,"stock",n)},expression:"scope.row.stock"}})]}}])})],2),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("关闭")])],1)],1)],1)},i=[],l=(n("a434"),n("b0c0"),n("5530")),a=n("b775");function r(t){return Object(a["a"])({url:"/store/getShopList",method:"post",data:t})}function c(t){return Object(a["a"])({url:"/store/deleteSpu",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/store/getSpecParam",method:"post",data:t})}function u(t){return Object(a["a"])({url:"/store/getShop",method:"post",data:t})}function d(t){return Object(a["a"])({url:"/store/updataSpu",method:"post",data:t})}function p(t){return Object(a["a"])({url:"/store/search",method:"post",data:t})}function h(t){return Object(a["a"])({url:"/store/checkDeleteShop",method:"post",data:t})}var f=n("2f62"),g={data:function(){return{readonly:!0,list:[],dialogVisible:!1,productAttr:[],stockList:[],query:"",ruleForm:{name:"",price:""},url:"",shopId:"",formLabelWidth:"120px",fileList:[],keyword:"",rules:{name:[{required:!0,message:"商品名不能为空！",max:15,trigger:"blur"}],price:[{required:!0,message:"价格不能为空且为数字！",trigger:"blur",pattern:/^\d*$/}]}}},created:function(){this.getShopList()},computed:Object(l["a"])({},Object(f["c"])({store_id:"storeInfo"})),methods:{handleShowSkuEditDialog:function(t,e){console.log(e,"------"),this.dialogVisible=!0,this.getSpec(e.spg_id),this.getData(e.id)},handleShowSkuEditDialog1:function(t,e){this.shopId=e.id,this.$router.push({path:"/product/addProduct",query:{id:e.id}})},getShopList:function(){var t=this;r({store_id:this.store_id.id}).then((function(e){var n=e.data,o=n.data;t.list=o,t.spg_id=o[0].spg_id,console.log(t.spg_id),console.log(t.spu_id)})).catch((function(t){console.log(t)}))},handleDelete:function(t,e){var n=this;this.$confirm("是否要进行删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var o=e.id;n.list.splice(t,1),c({id:o}).then((function(t){console.log(t),h({spu_id:e.id}).then((function(){console.log("sku表中删除成功")})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))}))},getSpec:function(t){var e=this;s({spg_id:t}).then((function(t){var n=t.data,o=n.data;e.productAttr=o})).catch((function(t){console.log(t)}))},getData:function(t){var e=this;u({spu_id:t}).then((function(t){var n=t.data,o=n.data;e.stockList=JSON.parse(JSON.stringify(o))})).catch((function(t){console.log(t)}))},getProductSkuSp:function(t,e){var n=JSON.parse(t.param);return null!=n&&e<n.length?n[e].value:null},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;var n=e.ruleForm;d({id:e.shopId,title:n.name,img:e.url,price:n.price}).then((function(){console.log("更新成功"),e.dialogVisible1=!1,location.reload()})).catch((function(t){console.log(t)}))}))},handleSearchList:function(){var t=this;p({keyword:this.keyword}).then((function(e){var n=e.data,o=n.data;t.list=o,t.spg_id=o[0].spg_id,t.spu_id=o[0].id})).catch((function(t){console.log(t)}))},handleResetSearch:function(){this.keyword=""},addShopCerent:function(){this.$router.push({path:"/product/addProduct"})},handleAddCoupon:function(t,e){this.$router.push({path:"/market/addCoupon",query:{spu_id:e.id}}),console.log(e.id)}}},b=g,m=(n("cb3e"),n("2877")),w=Object(m["a"])(b,o,i,!1,null,null,null);e["default"]=w.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1afbb8e4"],{"0c20":function(e,t,n){"use strict";var a=n("5b50"),r=n.n(a);r.a},"3ca3":function(e,t,n){"use strict";var a=n("6547").charAt,r=n("69f3"),o=n("7dd0"),u="String Iterator",c=r.set,d=r.getterFor(u);o(String,"String",(function(e){c(this,{type:u,string:String(e),index:0})}),(function(){var e,t=d(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=a(n,r),t.index+=e.length,{value:e,done:!1})}))},"5b50":function(e,t,n){},"9add":function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"g",(function(){return u})),n.d(t,"f",(function(){return c})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return i}));var a=n("b775");function r(e){return Object(a["a"])({url:"/wares/getBrands",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/wares/deleteBrand",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/wares/updataBrand",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/wares/searchBrand",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/wares/addBrand",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/wares/addStoreBrand",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/wares/addCategoryBrand",method:"post",data:e})}},b37a:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticClass:"form-container",attrs:{shadow:"never"}},[n("el-form",{ref:"brandFrom",attrs:{model:e.brand,rules:e.rules,"label-width":"150px"}},[n("el-form-item",{attrs:{label:"产品分类"}},[n("el-cascader",{ref:"calssOption",attrs:{options:e.productCateOptions},on:{change:e.handleCateChange},model:{value:e.selectProductCateValue,callback:function(t){e.selectProductCateValue=t},expression:"selectProductCateValue"}})],1),n("el-form-item",{attrs:{label:"品牌名称：",prop:"name"}},[n("el-input",{model:{value:e.brand.name,callback:function(t){e.$set(e.brand,"name",t)},expression:"brand.name"}})],1),n("el-form-item",{attrs:{label:"品牌首字母：",prop:"letter"}},[n("el-input",{model:{value:e.brand.letter,callback:function(t){e.$set(e.brand,"letter",t)},expression:"brand.letter"}})],1),n("el-form-item",{attrs:{label:"品牌LOGO：",prop:"image"}},[n("el-upload",{attrs:{action:"http://www.dreamqd.cn:5100/upload","list-type":"picture","on-success":e.handleUploadSuccess,"before-upload":e.handleUBeforeUpload},model:{value:e.brand.image,callback:function(t){e.$set(e.brand,"image",t)},expression:"brand.image"}},[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传jpg/png文件，且不超过5MB ")])],1),n("el-dialog",[n("img",{attrs:{width:"100%",src:this.brand.image,alt:""}})])],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("brandFrom")}}},[e._v("提交")])],1)],1)],1)},r=[],o=(n("b0c0"),n("d3b7"),n("3ca3"),n("ddb0"),n("96cf"),n("1da1")),u=n("5530"),c=n("9add"),d=n("c4c8"),s=n("2f62"),i={data:function(){return{store:"",brand:{name:"",image:"",letter:""},imageUrl:"",rules:{name:[{required:!0,message:"请输入品牌名称",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}],image:[{required:!0,message:"请输入品牌logo",trigger:"blur"}],letter:[{required:!0,message:"请输入品牌首字母"}]},selectProductCateValue:["shumajiadian"],productCateOptions:[{value:"shumajiadian",label:"数码家电",children:[]},{value:"jujiashenghuo",label:"居家生活",children:[]},{value:"fushi",label:"服饰",children:[]},{value:"meishi",label:"美食",children:[]},{value:"gehuqignjie",label:"个护清洁",children:[]},{value:"shoushizhubao",label:"首饰珠宝",children:[]}]}},computed:Object(u["a"])({},Object(s["c"])(["storeInfo"])),created:function(){this.getProductCateList(),this.selectProductCateValue.push("1")},methods:{handleUploadSuccess:function(e,t){console.log(t),console.log(t.response.files),this.brand.image=t.response.files},handleUBeforeUpload:function(e){var t=this;return console.log(e),new Promise((function(n,a){e.size>5242880?(t.$message({message:"只能上传jpg/png文件，且不超过5MB",type:"error",duration:1e3}),a()):n()}))},getProductCateList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=regeneratorRuntime.mark((function t(n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={parent_name:""},a.parent_name=e.productCateOptions[n].label,t.next=4,Object(d["i"])(a).then((function(t){for(var a=t.data.data,r=0;r<a.length;r++)e.productCateOptions[n].children.push({value:"".concat(a[r].id),label:"".concat(a[r].name)})})).catch((function(e){console.log(e)}));case 4:case"end":return t.stop()}}),t)})),a=0;case 2:if(!(a<e.productCateOptions.length)){t.next=7;break}return t.delegateYield(n(a),"t0",4);case 4:a++,t.next=2;break;case 7:case"end":return t.stop()}}),t)})))()},handleCateChange:function(){console.log(this.selectProductCateValue)},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.$message({message:"验证失败",type:"error",duration:1e3}),!1;t.$confirm("是否提交数据","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["f"])({name:t.brand.name}).then((function(e){console.log(e,t.storeInfo.id),200==e.data.code?(Object(c["c"])({brand_id:e.data.data[0].id,store_id:t.storeInfo.id}),Object(c["b"])({brand_id:e.data.data[0].id,category_id:t.selectProductCateValue[1],store_id:t.storeInfo.id}).then((function(e){console.log(e),501==e.data.code?t.$message({message:"该品牌已经存在",type:"warning"}):t.$message({message:"添加成功",type:"success"})})),t.$router.go(-1)):Object(c["a"])({name:t.brand.name,image:t.brand.image,letter:t.brand.letter}).then((function(e){console.log(e),console.log(e.data.data.insertId),200==e.data.code?(Object(c["c"])({brand_id:e.data.data.insertId,store_id:t.storeInfo.id}),Object(c["b"])({brand_id:e.data.data.insertId,category_id:t.selectProductCateValue[1],store_id:t.storeInfo.id}).then((function(e){console.log(e)})),t.$message({message:"提交成功",type:"success",duration:1e3}),t.$router.go(-1)):t.$message({message:"添加失败",type:"warning",duration:3e3})}))}))})).catch((function(e){console.log(e)}))}))}}},l=i,f=(n("0c20"),n("2877")),m=Object(f["a"])(l,a,r,!1,null,null,null);t["default"]=m.exports},c4c8:function(e,t,n){"use strict";n.d(t,"j",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"f",(function(){return u})),n.d(t,"i",(function(){return c})),n.d(t,"o",(function(){return d})),n.d(t,"l",(function(){return s})),n.d(t,"m",(function(){return i})),n.d(t,"b",(function(){return l})),n.d(t,"n",(function(){return f})),n.d(t,"a",(function(){return m})),n.d(t,"k",(function(){return p})),n.d(t,"e",(function(){return b})),n.d(t,"p",(function(){return g})),n.d(t,"h",(function(){return h})),n.d(t,"g",(function(){return j})),n.d(t,"c",(function(){return O}));var a=n("b775");function r(e){return Object(a["a"])({url:"/wares/getMenu",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/wares/deleteMenu",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/wares/deleteSubmenu",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/wares/getSubmenu",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/wares/getStorBrands",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/store/getSpecParam",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/classification/class",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/store/addSpu",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/store/getSpu",method:"post",data:e})}function m(e){return Object(a["a"])({url:"/store/addMoreSku",method:"post",data:e})}function p(e){return Object(a["a"])({url:"/store/getSku",method:"post",data:e})}function b(e){return Object(a["a"])({url:"/store/checkDelete",method:"post",data:e})}function g(e){return Object(a["a"])({url:"/store/updataShop",method:"post",data:e})}function h(e){return Object(a["a"])({url:"/store/getCatName",method:"post",data:e})}function j(e){return Object(a["a"])({url:"/store/getBrandName",method:"post",data:e})}function O(e){return Object(a["a"])({url:"/store/deleteSpu",method:"post",data:e})}}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b3c648e"],{"231f":function(e,a,t){},b8de:function(e,a,t){"use strict";t.r(a);var o=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-card",{staticClass:"form-container",attrs:{shadow:"never"}},[t("el-form",{ref:"infoModify",attrs:{model:e.infoModify,rules:e.rules}},[t("el-form-item",{attrs:{label:"头像上传:","label-width":e.formLabelWidth}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/uploadimg/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?t("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t("i",{staticClass:"span"},[e._v("点击头像上传")])],1),t("el-form-item",{attrs:{label:"店铺名称:","label-width":e.formLabelWidth,prop:"name"}},[t("el-input",{staticClass:"shopName",attrs:{autocomplete:"off",placeholder:"请输入名称"},model:{value:e.infoModify.name,callback:function(a){e.$set(e.infoModify,"name",a)},expression:"infoModify.name"}})],1),t("el-form-item",{attrs:{label:"店铺地址:","label-width":e.formLabelWidth,prop:"address"}},[t("el-input",{staticClass:"shopName",attrs:{autocomplete:"off",placeholder:"请输入地址"},model:{value:e.infoModify.address,callback:function(a){e.$set(e.infoModify,"address",a)},expression:"infoModify.address"}})],1),t("el-form-item",{attrs:{label:"店铺介绍:","label-width":e.formLabelWidth}},[t("el-input",{staticClass:"shopName",attrs:{autocomplete:"off",type:"textarea",placeholder:"请输入店铺介绍内容"},model:{value:e.infoModify.desc,callback:function(a){e.$set(e.infoModify,"desc",a)},expression:"infoModify.desc"}})],1),t("el-form-item",{attrs:{label:"联系方式:","label-width":e.formLabelWidth,prop:"tel"}},[t("el-input",{staticClass:"shopName",attrs:{autocomplete:"off",placeholder:"请输入联系方式"},model:{value:e.infoModify.tel,callback:function(a){e.$set(e.infoModify,"tel",a)},expression:"infoModify.tel"}})],1),t("el-form-item",{attrs:{label:"店铺所在区:","label-width":e.formLabelWidth,prop:"region"}},[t("el-input",{staticClass:"shopName",attrs:{autocomplete:"off",placeholder:"请输入店铺所在区"},model:{value:e.infoModify.region,callback:function(a){e.$set(e.infoModify,"region",a)},expression:"infoModify.region"}})],1),t("el-form-item",{attrs:{label:"店主姓名","label-width":e.formLabelWidth,prop:"real_name"}},[t("el-input",{staticClass:"shopName",attrs:{autocomplete:"off",placeholder:"请输入店主姓名"},model:{value:e.infoModify.real_name,callback:function(a){e.$set(e.infoModify,"real_name",a)},expression:"infoModify.real_name"}})],1),t("el-form-item",{staticClass:"sub"},[t("el-button",{on:{click:function(a){return e.handleResetSearch()}}},[e._v("重 置")]),t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.submitForm("infoModify")}}},[e._v("确认修改")])],1)],1)],1)},r=[],i=(t("b0c0"),t("d3b7"),t("3ca3"),t("ddb0"),t("2b3d"),t("5530")),s=t("b775");function l(e){return Object(s["a"])({url:"/store/infoModify",method:"post",data:e})}function n(e){return Object(s["a"])({url:"/store/getInfo",method:"post",data:e})}var d=t("2f62"),c=(t("0f9a"),{data:function(){var e=function(e,a,t){/^1[34578]\d{9}$/.test(a)?t():t("手机号信息有误")};return{imageUrl:[],formLabelWidth:"120px",infoModify:{avatarSrc:"",name:"",address:"",desc:"",tel:"",region:"",real_name:""},rules:{imageUrl:[{required:!0,message:"请上传头像",trigger:"change"}],name:[{required:!0,message:"商品名不能为空！",max:15,trigger:"blur"}],address:[{required:!0,message:"地址不能为空！",trigger:"blur"}],tel:[{required:!0,message:"手机号不能为空",trigger:"blur"},{validator:e,trigger:"blur"}],region:[{required:!0,message:"店铺所在区不能为空！",trigger:"blur"}],real_name:[{required:!0,message:"店主名不能为空！",trigger:"blur"}]}}},created:function(){var e=this;n({id:this.store_id.id}).then((function(a){e.infoModify=a.data.data[0],e.imageUrl=a.data.data[0].avatar})).catch((function(e){console.log(e)}))},computed:Object(i["a"])({},Object(d["c"])({store_id:"storeInfo"})),methods:{handleAvatarSuccess:function(e,a){this.imageUrl=URL.createObjectURL(a.raw),this.infoModify.avatarSrc=a.response.files},beforeAvatarUpload:function(e){var a=e.size/1024/1024<2;return a||this.$message.error("上传头像图片大小不能超过 2MB!"),a},submitForm:function(e){var a=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var t=a.infoModify;if(t.avatarSrc){var o=a.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});l({id:a.store_id.id,name:t.name,avatar:t.avatarSrc,address:t.address,desc:t.desc,tel:t.tel,region:t.region,real_name:t.real_name}).then((function(e){200==e.data.code?(o.close(),sessionStorage.setItem("user_avatar",a.infoModify.avatarSrc),a.$message({message:"修改成功！",type:"success"}),location.reload()):(o.close(),a.$message({message:"修改失败！",type:"error"}))})).catch((function(e){console.log(e)}))}else a.$message({message:"请上传图片",type:"warning"})}))},handleResetSearch:function(){this.infoModify={},this.imageUrl=[]}}}),f=c,u=(t("bc5c"),t("2877")),m=Object(u["a"])(f,o,r,!1,null,null,null);a["default"]=m.exports},bc5c:function(e,a,t){"use strict";var o=t("231f"),r=t.n(o);r.a}}]);